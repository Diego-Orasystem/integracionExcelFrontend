<div class="card">
  <div class="card-header">
    <h3><i class="fas fa-puzzle-piece"></i> Mapa de Áreas y Subáreas</h3>
    <div class="card-header-actions">
      <span class="header-info">Visualización integral de archivos por áreas y subáreas</span>
    </div>
  </div>
  <div class="card-content">
    <div *ngIf="isLoadingPuzzle" class="loading-container">
      <div class="spinner"></div>
      <span>Cargando visualización...</span>
    </div>
    <div *ngIf="!isLoadingPuzzle && puzzleData.length > 0" class="puzzle-visualization-wrapper">
      <app-puzzle-visualization 
        [puzzleData]="puzzleData"
        [areaStats]="areaStats"
        [subareaStats]="subareaStats"
        [groupBy]="groupBy">
      </app-puzzle-visualization>
    </div>
    <div *ngIf="!isLoadingPuzzle && puzzleData.length === 0" class="empty-visualization">
      <i class="fas fa-chart-pie"></i>
      <p>No hay datos suficientes para generar la visualización</p>
      <button class="btn-refresh" (click)="cargarDatosPuzzle()">
        <i class="fas fa-sync-alt"></i> Actualizar datos
      </button>
    </div>
    
    <div *ngIf="errorMessage" class="error-message">
      <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
    </div>
  </div>
</div> 