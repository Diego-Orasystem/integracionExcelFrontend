<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentaci√≥n: MVP Sistema de Archivos con Permisos</title>
  <link rel="stylesheet" href="documentacion-mvp-sistema-archivos.css">
</head>
<body>
  <div class="doc-container">
    <header class="doc-header">
      <h1>MVP: Sistema de Archivos con Permisos</h1>
      <p class="doc-subtitle">Documentaci√≥n de Producto M√≠nimo Viable</p>
    </header>

    <div class="doc-section">
      <h2>1. Descripci√≥n General</h2>
      <p>
        El MVP del Sistema de Archivos implementa la gesti√≥n b√°sica de documentos con una
        estructura organizacional jer√°rquica (compa√±√≠as, √°reas y sub√°reas) y un sistema de 
        permisos basado en roles que garantiza que los usuarios solo accedan a los archivos 
        autorizados seg√∫n su nivel y asignaciones.
      </p>

      <div class="key-features">
        <h3>Caracter√≠sticas Principales</h3>
        <ul>
          <li><span class="badge feature">Estructura Jer√°rquica</span> Organizaci√≥n de archivos por compa√±√≠a, √°rea y sub√°rea</li>
          <li><span class="badge feature">Permisos por Rol</span> Control de acceso basado en roles predefinidos</li>
          <li><span class="badge feature">Operaciones B√°sicas</span> Subir, descargar y eliminar archivos</li>
          <li><span class="badge feature">Explorador de Archivos</span> Navegaci√≥n intuitiva por la estructura de carpetas</li>
        </ul>
      </div>
    </div>

    <div class="doc-section">
      <h2>2. Estructura del Sistema</h2>
      
      <div class="structure-diagram">
        <div class="structure-level company">
          <div class="structure-box">Compa√±√≠a</div>
          <div class="structure-arrow">‚Üì</div>
        </div>
        <div class="structure-level area">
          <div class="structure-box">√Åreas</div>
          <div class="structure-arrow">‚Üì</div>
        </div>
        <div class="structure-level subarea">
          <div class="structure-box">Sub√°reas</div>
          <div class="structure-arrow">‚Üì</div>
        </div>
        <div class="structure-level folder">
          <div class="structure-box">Carpetas</div>
          <div class="structure-arrow">‚Üì</div>
        </div>
        <div class="structure-level file">
          <div class="structure-box">Archivos</div>
        </div>
      </div>

      <div class="entity-descriptions">
        <div class="entity-card">
          <h3>Compa√±√≠a</h3>
          <p>Nivel superior de organizaci√≥n. Cada usuario pertenece a una compa√±√≠a.</p>
        </div>
        <div class="entity-card">
          <h3>√Årea</h3>
          <p>Divisi√≥n principal dentro de una compa√±√≠a (Ej: Finanzas, RRHH, Operaciones).</p>
        </div>
        <div class="entity-card">
          <h3>Sub√°rea</h3>
          <p>Subdivisi√≥n de un √°rea (Ej: Contabilidad, Tesorer√≠a dentro de Finanzas).</p>
        </div>
        <div class="entity-card">
          <h3>Carpeta</h3>
          <p>Contenedor de archivos. Cada √°rea y sub√°rea tiene una carpeta asociada.</p>
        </div>
        <div class="entity-card">
          <h3>Archivo</h3>
          <p>Documento almacenado en el sistema (principalmente archivos Excel).</p>
        </div>
      </div>
    </div>

    <div class="doc-section">
      <h2>3. Sistema de Permisos</h2>
      
      <div class="permissions-card">
        <h3>Roles del Sistema</h3>
        <table class="permissions-table">
          <thead>
            <tr>
              <th>Rol</th>
              <th>Descripci√≥n</th>
              <th>Alcance</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="role-name">Administrador</td>
              <td>Control total sobre el sistema</td>
              <td>Todas las compa√±√≠as, √°reas y sub√°reas</td>
            </tr>
            <tr>
              <td class="role-name">Admin. de Compa√±√≠a</td>
              <td>Control sobre una compa√±√≠a espec√≠fica</td>
              <td>Todas las √°reas y sub√°reas de su compa√±√≠a</td>
            </tr>
            <tr>
              <td class="role-name">Usuario Control</td>
              <td>Monitoreo de actividades y archivos</td>
              <td>√Åreas asignadas (solo lectura)</td>
            </tr>
            <tr>
              <td class="role-name">Usuario Responsable</td>
              <td>Gesti√≥n de archivos en sub√°reas</td>
              <td>Sub√°reas espec√≠ficas asignadas</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="permissions-card">
        <h3>Matriz de Permisos por Operaci√≥n</h3>
        <table class="operations-table">
          <thead>
            <tr>
              <th>Operaci√≥n</th>
              <th>Admin</th>
              <th>Admin. Compa√±√≠a</th>
              <th>Usuario Control</th>
              <th>Usuario Responsable</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Ver archivos</td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
            </tr>
            <tr>
              <td>Descargar archivos</td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
            </tr>
            <tr>
              <td>Subir archivos</td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission no">‚úó</span></td>
              <td><span class="permission yes">‚úì</span></td>
            </tr>
            <tr>
              <td>Eliminar archivos</td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission no">‚úó</span></td>
              <td><span class="permission limited">¬±</span></td>
            </tr>
            <tr>
              <td>Crear carpetas</td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission no">‚úó</span></td>
              <td><span class="permission no">‚úó</span></td>
            </tr>
            <tr>
              <td>Gestionar √°reas/sub√°reas</td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission yes">‚úì</span></td>
              <td><span class="permission no">‚úó</span></td>
              <td><span class="permission no">‚úó</span></td>
            </tr>
          </tbody>
        </table>
        <div class="table-legend">
          <span class="permission yes">‚úì</span> Permitido
          <span class="permission no">‚úó</span> No permitido
          <span class="permission limited">¬±</span> Permitido con restricciones
        </div>
      </div>
    </div>

    <div class="doc-section">
      <h2>4. Funcionalidades Principales</h2>

      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-icon">üìÇ</div>
          <h3>Explorador de Archivos</h3>
          <p>Permite navegar por la estructura de carpetas seg√∫n los permisos del usuario.</p>
          <ul class="feature-details">
            <li>Visualizaci√≥n de estructura jer√°rquica</li>
            <li>Navegaci√≥n intuitiva entre carpetas</li>
            <li>Filtros por tipo de archivo y fecha</li>
            <li>Vista adaptada a los permisos del usuario</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">‚¨ÜÔ∏è</div>
          <h3>Carga de Archivos</h3>
          <p>Permite subir nuevos archivos al sistema dentro de la estructura jer√°rquica.</p>
          <ul class="feature-details">
            <li>Validaci√≥n de permisos de escritura</li>
            <li>Comprobaci√≥n de tipo de archivo</li>
            <li>Validaci√≥n de nombre duplicado</li>
            <li>Barra de progreso de carga</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">‚¨áÔ∏è</div>
          <h3>Descarga de Archivos</h3>
          <p>Permite obtener archivos almacenados en el sistema.</p>
          <ul class="feature-details">
            <li>Validaci√≥n de permisos de lectura</li>
            <li>Descarga directa al navegador</li>
            <li>Registro de descargas en logs</li>
          </ul>
        </div>

        <div class="feature-card">
          <div class="feature-icon">üóëÔ∏è</div>
          <h3>Eliminaci√≥n de Archivos</h3>
          <p>Permite eliminar archivos con confirmaci√≥n previa.</p>
          <ul class="feature-details">
            <li>Validaci√≥n de permisos de eliminaci√≥n</li>
            <li>Confirmaci√≥n obligatoria</li>
            <li>Eliminaci√≥n l√≥gica vs. f√≠sica</li>
            <li>Registro detallado en logs</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="doc-section">
      <h2>5. Arquitectura T√©cnica</h2>

      <div class="tech-stack">
        <h3>Stack Tecnol√≥gico</h3>
        <div class="stack-items">
          <div class="stack-item">
            <div class="stack-name">Backend</div>
            <div class="stack-tech">Node.js + Express</div>
          </div>
          <div class="stack-item">
            <div class="stack-name">Frontend</div>
            <div class="stack-tech">Angular</div>
          </div>
          <div class="stack-item">
            <div class="stack-name">Base de Datos</div>
            <div class="stack-tech">MongoDB</div>
          </div>
          <div class="stack-item">
            <div class="stack-name">Autenticaci√≥n</div>
            <div class="stack-tech">JWT</div>
          </div>
        </div>
      </div>

      <div class="api-section">
        <h3>Principales Endpoints de API</h3>
        <table class="api-table">
          <thead>
            <tr>
              <th>Endpoint</th>
              <th>M√©todo</th>
              <th>Descripci√≥n</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>/api/folders</code></td>
              <td>GET</td>
              <td>Obtiene la lista de carpetas accesibles</td>
            </tr>
            <tr>
              <td><code>/api/files</code></td>
              <td>GET</td>
              <td>Obtiene archivos (filtrados por carpeta)</td>
            </tr>
            <tr>
              <td><code>/api/files</code></td>
              <td>POST</td>
              <td>Sube un nuevo archivo</td>
            </tr>
            <tr>
              <td><code>/api/files/:id</code></td>
              <td>GET</td>
              <td>Descarga un archivo</td>
            </tr>
            <tr>
              <td><code>/api/files/:id</code></td>
              <td>DELETE</td>
              <td>Elimina un archivo</td>
            </tr>
            <tr>
              <td><code>/api/areas</code></td>
              <td>GET</td>
              <td>Obtiene las √°reas accesibles</td>
            </tr>
            <tr>
              <td><code>/api/areas/:areaId/subareas</code></td>
              <td>GET</td>
              <td>Obtiene sub√°reas de un √°rea</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="doc-section">
      <h2>6. Flujos de Usuario</h2>

      <div class="user-flow">
        <h3>Subir un Archivo</h3>
        <ol class="flow-steps">
          <li>Usuario navega a la ubicaci√≥n deseada (√°rea/sub√°rea/carpeta)</li>
          <li>Usuario hace clic en "Subir Archivo" (si tiene permisos)</li>
          <li>Se abre di√°logo para seleccionar archivo</li>
          <li>Usuario selecciona archivo y confirma</li>
          <li>Sistema valida permisos y tipo de archivo</li>
          <li>Archivo se sube y aparece en la lista</li>
        </ol>
      </div>

      <div class="user-flow">
        <h3>Acceder a un Archivo Restringido</h3>
        <ol class="flow-steps">
          <li>Usuario intenta navegar a una ubicaci√≥n sin permisos</li>
          <li>Sistema verifica permisos del usuario</li>
          <li>Se muestra mensaje "Acceso denegado: No tiene permisos para esta ubicaci√≥n"</li>
          <li>Usuario es redirigido al nivel superior al que tiene acceso</li>
        </ol>
      </div>
    </div>

    <div class="doc-section">
      <h2>7. Interfaz de Usuario</h2>

      <div class="ui-mockup">
        <h3>Explorador de Archivos</h3>
        <div class="mockup-img">
          <div class="mockup-placeholder">
            <div class="mockup-sidebar">
              <div class="mockup-area">√Årea: Finanzas</div>
              <div class="mockup-subarea">Sub√°rea: Contabilidad</div>
              <div class="mockup-subarea active">Sub√°rea: Tesorer√≠a</div>
              <div class="mockup-subarea">Sub√°rea: Presupuestos</div>
            </div>
            <div class="mockup-content">
              <div class="mockup-toolbar">
                <div class="mockup-breadcrumb">Finanzas > Tesorer√≠a</div>
                <div class="mockup-actions">
                  <button class="mockup-btn">‚¨ÜÔ∏è Subir</button>
                </div>
              </div>
              <div class="mockup-files">
                <div class="mockup-file">
                  <div class="mockup-file-icon">üìä</div>
                  <div class="mockup-file-name">Flujo_Mayo_2023.xlsx</div>
                </div>
                <div class="mockup-file">
                  <div class="mockup-file-icon">üìä</div>
                  <div class="mockup-file-name">Flujo_Junio_2023.xlsx</div>
                </div>
                <div class="mockup-file">
                  <div class="mockup-file-icon">üìä</div>
                  <div class="mockup-file-name">Proyecci√≥n_Q3.xlsx</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="doc-section">
      <h2>8. Futuras Iteraciones</h2>
      <p>Caracter√≠sticas planificadas para versiones posteriores al MVP:</p>
      <ul class="future-features">
        <li><span class="badge future">Previsualizaci√≥n</span> Visor integrado de archivos Excel sin necesidad de descargar</li>
        <li><span class="badge future">Versionado</span> Control de versiones de archivos con historial de cambios</li>
        <li><span class="badge future">Comentarios</span> Posibilidad de a√±adir comentarios a los archivos</li>
        <li><span class="badge future">Permisos Granulares</span> Permisos a nivel de archivo individual</li>
        <li><span class="badge future">Colaboraci√≥n</span> Edici√≥n colaborativa de archivos</li>
        <li><span class="badge future">B√∫squeda Avanzada</span> B√∫squeda por contenido dentro de archivos</li>
      </ul>
    </div>

    <footer class="doc-footer">
      <p>Sistema de Gesti√≥n de Archivos con Permisos - Documentaci√≥n MVP</p>
      <p class="copyright">¬© 2023 Todos los derechos reservados</p>
    </footer>
  </div>
</body>
</html> 